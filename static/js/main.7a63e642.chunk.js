(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),i=n(11),o=n.n(i),s=(n(94),n(41)),u=n(13),l=n(22),j=n.n(l),p=n(30),h=n(15),b=n(35),d=n(152),O=n(155),f=n(156),x=n(157),m=n(154),g=n(149),v=Object(g.a)({card:{height:"250px"}}),k=function(){var e=v(),t=Object(c.useState)(),n=Object(h.a)(t,2),i=n[0],o=n[1];return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://fierce-dawn-51159.herokuapp.com/","api/recipes"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,o(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Error! ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsxs)(d.a,{children:[Object(a.jsx)(b.a,{variant:"h1",children:"Reseptit"}),Object(a.jsx)(b.a,{variant:"body1",children:"Rutkasti herkullisia reseptej\xe4, uudessa ulkoasussa!"}),Object(a.jsx)(m.a,{container:!0,spacing:1,children:i&&i.map((function(t){return Object(a.jsx)(m.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(a.jsxs)(O.a,{className:e.card,children:[Object(a.jsx)(f.a,{title:t.name,subheader:t.description}),Object(a.jsx)(x.a,{children:Object(a.jsxs)(b.a,{variant:"body2",color:"textSecondary",component:"p",children:[t.ingredients.map((function(e){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)("span",{children:[e.name," ",":"," ",e.amount]}),Object(a.jsx)("br",{})]},e.name)})),t.instruction]})})]})},t._id)}))})]})},y=function(){return Object(a.jsxs)(d.a,{children:[Object(a.jsx)(b.a,{variant:"h1",children:"Kotiverkko 2.0"}),Object(a.jsx)(b.a,{variant:"body1",children:"Kaikki palvelut, joita kotona voi tarvita! Typescriptill\xe4!"})]})},w=n(19),S=n(174),C=n(175),N=n(161),I=function(e){var t=e.handleChange,n=r.a.useState(!1),i=Object(h.a)(n,2),o=i[0],s=i[1],u=r.a.useState([]),l=Object(h.a)(u,2),b=l[0],d=l[1],O=r.a.useState([]),f=Object(h.a)(O,2),x=f[0],m=f[1],g=r.a.useState(""),v=Object(h.a)(g,2),k=v[0],y=v[1],I=!1,E=o&&I&&k.length>2;return Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I=!0,e.prev=1,e.next=4,fetch("".concat("https://fierce-dawn-51159.herokuapp.com/","api/stops?name=").concat(k));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,d(n),I=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),I=!1,alert("Error! ".concat(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();3===k.length&&e(),k.length<3&&d([])}),[k]),Object(a.jsx)(C.a,{id:"selectstops",multiple:!0,style:{width:300},open:o,onOpen:function(){s(!0)},onClose:function(){s(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},renderOption:function(e){return Object(a.jsx)(a.Fragment,{children:"".concat(e.name," (").concat(e.code,")")})},options:b,loading:E,inputValue:k,onInputChange:function(e,t){y(t)},renderInput:function(e){return Object(a.jsx)(S.a,Object(w.a)(Object(w.a)({},e),{},{label:"Pys\xe4kki",variant:"outlined",InputProps:Object(w.a)(Object(w.a)({},e.InputProps),{},{endAdornment:Object(a.jsxs)(a.Fragment,{children:[E?Object(a.jsx)(N.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},onChange:function(e,n){console.log("new value is",n),m(n),t(n)},value:x})},E=function(e){var t=e.handleChange,n=e.stopValue,i=r.a.useState([]),o=Object(h.a)(i,2),s=o[0],u=o[1],l=r.a.useState([]),b=Object(h.a)(l,2),d=b[0],O=b[1],f=r.a.useState(""),x=Object(h.a)(f,2),m=x[0],g=x[1],v=r.a.useState(!1),k=Object(h.a)(v,2),y=k[0],I=k[1],E=y&&0===s.length;return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(j.a.mark((function e(){var t,a,c,r,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("".concat("https://fierce-dawn-51159.herokuapp.com/","api/routes"));case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,c=n.map((function(e){return e.routes.map((function(e){return e.id}))})),r=c.flat(),i=r.filter((function(e,t,n){return n.indexOf(e)===t})),console.log(i),o=a.filter((function(e){return null===i||void 0===i?void 0:i.includes(e.id)})),u(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),alert("Error! ".concat(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(a.jsx)(C.a,{id:"selectstops",multiple:!0,style:{width:300},open:y,onOpen:function(){I(!0)},onClose:function(){I(!1)},getOptionSelected:function(e,t){return e.name===t.shortName},getOptionLabel:function(e){return e.shortName},renderOption:function(e){return Object(a.jsx)(a.Fragment,{children:"".concat(e.shortName," (").concat(e.longName,")")})},options:s,loading:E,inputValue:m,onInputChange:function(e,t){g(t)},renderInput:function(e){return Object(a.jsx)(S.a,Object(w.a)(Object(w.a)({},e),{},{label:"Linjat",variant:"outlined",InputProps:Object(w.a)(Object(w.a)({},e.InputProps),{},{endAdornment:Object(a.jsxs)(a.Fragment,{children:[E?Object(a.jsx)(N.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},onChange:function(e,n){O(n),t(n)},value:d})},P=n(163),F=n(167),D=n(166),V=n(162),L=n(164),A=n(165),T=n(78),B=function(e){var t=e.stopValue,n=e.routeValue,i=r.a.useState([]),o=Object(h.a)(i,2),s=o[0],u=o[1];Object(c.useEffect)((function(){(function(){var e=Object(p.a)(j.a.mark((function e(){var n,a,c,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=t.map((function(e){return"stop=".concat(e.gtfsId)})),a="".concat("https://fierce-dawn-51159.herokuapp.com/","api/departures?").concat(n.join("&")),e.next=7,fetch(a);case 7:return c=e.sent,e.next=10,c.json();case 10:r=e.sent,console.log(r.data.stops),i=[],r.data.stops.forEach((function(e){e.stoptimesWithoutPatterns.forEach((function(t){i.push(Object(w.a)(Object(w.a)({},t),{},{stopName:e.name}))}))})),u(i.flat()),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),alert("Error! ".concat(e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var l=Date.now(),b=Math.floor(l/1e3);return Object(a.jsx)(V.a,{component:T.a,children:Object(a.jsxs)(P.a,{"aria-label":"simple table",children:[Object(a.jsx)(L.a,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(D.a,{children:"Linja"}),Object(a.jsx)(D.a,{align:"right",children:"Pys\xe4kki"}),Object(a.jsx)(D.a,{align:"right",children:"M\xe4\xe4r\xe4np\xe4\xe4"}),Object(a.jsx)(D.a,{align:"right",children:"Kello"}),Object(a.jsx)(D.a,{align:"right",children:"Aikaa l\xe4ht\xf6\xf6n"})]})}),Object(a.jsx)(F.a,{children:s.length>0&&s.map((function(e){return 0===n.length||n.map((function(e){return e.shortName})).includes(e.trip.route.shortName)?Object(a.jsxs)(A.a,{children:[Object(a.jsx)(D.a,{component:"th",scope:"row",children:e.trip.route.shortName}),Object(a.jsx)(D.a,{align:"right",children:e.stopName}),Object(a.jsx)(D.a,{align:"right",children:e.headsign}),Object(a.jsx)(D.a,{align:"right",children:(t=e.scheduledDeparture+e.serviceDay,new Date(1e3*t).toLocaleTimeString().replaceAll(".",":").slice(0,-3))}),Object(a.jsxs)(D.a,{align:"right",children:[Math.floor((e.scheduledDeparture+e.serviceDay-b)/60),"min"]})]},"".concat(e.trip.route.shortName).concat(e.scheduledDeparture)):null;var t}))})]})})},J=function(){var e=r.a.useState([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=r.a.useState([]),o=Object(h.a)(i,2),s=o[0],u=o[1];return console.log("in publicTransport, stops and routes",n,s),Object(a.jsxs)(d.a,{children:[Object(a.jsx)(b.a,{variant:"h1",children:"Julkisen liikenteen yhteydet"}),Object(a.jsx)(I,{handleChange:function(e){return c(e)}}),n.length>0?Object(a.jsx)(E,{stopValue:n,handleChange:function(e){return u(e)}}):null,n.length>0&&Object(a.jsx)(B,{stopValue:n,routeValue:s})]})},K=n(75),M=n(168),R=n(169),z=Object(K.a)({palette:{type:"dark"}}),H=function(e){var t=e.children;return Object(a.jsxs)(M.a,{theme:z,children:[Object(a.jsx)(R.a,{}),t]})},W=n(170),_=n(171),q=n(159),G=n(74),Q=n.n(G),U=n(172),X=n(173),Y=n(177),Z=n(160),$=Object(g.a)((function(e){return{menuButton:{},title:{},root:{background:e.palette.primary.dark}}})),ee=function(){var e=$(),t=r.a.useState(!1),n=Object(h.a)(t,2),c=n[0],i=n[1],o=function(){i(!1)};return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(W.a,{position:"static",children:Object(a.jsxs)(_.a,{children:[Object(a.jsx)(q.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){i(!0)},children:Object(a.jsx)(Q.a,{})}),Object(a.jsx)(b.a,{variant:"h6",className:e.title,children:"Kotiverkko 2.0"})]})}),Object(a.jsx)(Y.a,{anchor:"left",open:c,onClose:o,children:Object(a.jsxs)(Z.a,{children:[Object(a.jsx)(U.a,{button:!0,component:s.b,to:"/",onClick:o,children:Object(a.jsx)(X.a,{primary:"Home"})},"home"),Object(a.jsx)(U.a,{button:!0,component:s.b,to:"/reseptit",onClick:o,children:Object(a.jsx)(X.a,{primary:"Reseptit"})},"recipes"),Object(a.jsx)(U.a,{button:!0,component:s.b,to:"/joukkoliikenne",onClick:o,children:Object(a.jsx)(X.a,{primary:"Joukkoliikenne"})},"publicTransport")]})})]})},te=function(){return Object(a.jsx)(H,{children:Object(a.jsxs)(s.a,{basename:"/project",children:[Object(a.jsx)(ee,{}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/",children:Object(a.jsx)(y,{})}),Object(a.jsx)(u.a,{path:"/reseptit",children:Object(a.jsx)(k,{})}),Object(a.jsx)(u.a,{path:"/joukkoliikenne",children:Object(a.jsx)(J,{})})]})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,179)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(te,{})}),document.getElementById("root")),ne()},94:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.7a63e642.chunk.js.map